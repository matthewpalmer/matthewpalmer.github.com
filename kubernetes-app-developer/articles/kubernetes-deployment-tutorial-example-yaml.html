<html>
<head>
  <meta charset="utf-8">
  <title>Kubernetes Deployment Tutorial with YAML | Kubernetes Book</title>
  <link rel="stylesheet" href="../styles.css" media="screen" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-35071535-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-35071535-2');
  </script>
</head>
<body class="sidebar">
    <nav class="article-nav">
        <a href="/kubernetes-app-developer/">üè° Home</a>
        
        <a href="/kubernetes-app-developer/kubernetes-book.html">üìñ Kubernetes Book</a>
        <a href="/kubernetes-app-developer/#purchase">üéì CKAD Certification Course</a>
    </nav>
    
    <div class="article-container">
        <h1>Kubernetes Deployment Tutorial with Example YAML</h1>

        <p>Everyone running applications on Kubernetes cluster uses a deployment. </p>

        <p>It‚Äôs what you use to scale, roll out, and roll back versions of your applications.</p>

        <p>With a deployment, you tell Kubernetes how many copies of a Pod you want running. The deployment takes care of everything else.</p>

        <p><img src="kubernetes-deployment-static.png" alt="Kubernetes Deployment Diagram" /></p>

        <h2>What is a Deployment?</h2>

        <p>A deployment is an object in Kubernetes that lets you manage a set of identical pods.</p>

        <p>Without a deployment, you‚Äôd need to create, update, and delete a bunch of pods manually.</p>

        <p>With a deployment, you declare a single object in a YAML file. This object is responsible for creating the pods, making sure they stay up to date, and ensuring there are enough of them running</p>

        <p>You can also easily autoscale your applications using a Kubernetes deployment.</p>

        <p><img src="deployment-diagram-kubernetes.gif" alt="How Kubernetes Deployments Work Animation" /></p>

        <h2>YAML reference example</h2>

        <p>Here‚Äôs some YAML that you can use as a template for creating your deployments.</p>

        <p>First, take a look at the animation that annotates each section of the deployment YAML. (Scroll down for code that can be copy-and-pasted.)</p>

        <p><img src="deployment-yaml-diagram.gif" alt="Deployment YAML example" /></p>

        <p>(You can ignore the additional comments about the "service" here ‚Äì this deployment was taken from a different example that also incorporated services.)</p>

        <p>First, the <code>replicas</code> key sets the number of instances of the pod that the deployment should keep alive.</p>

        <p>Next, we use a label selector to tell the deployment which pods are part of the deployment. This essentially says "all the pods matching these labels are grouped in our deployment."</p>

        <p>After that, we have the <code>template</code> object.</p>

        <p>This is interesting. It‚Äôs essentially a pod template jammed inside our deployment spec. When the deployment creates pods, it will create them using this template!</p>

        <p>So everything under the <code>template</code> key is a regular pod specification.</p>

        <p>In this case, the deployment will create pods that run <code>nginx-hostname</code> and with the configured labels.</p>

        <script src="https://gist.github.com/matthewpalmer/3a63fc20ecbf5d82ffe5bf1a8ec968ac.js"></script>

        <h2>Deployment vs service</h2>

        <p>What‚Äôs the difference between a deployment and a service?</p>

        <p>A deployment is used to keep a set of pods running by creating pods from a template.</p>

        <p>A service is used to allow network access to a set of pods.</p>

        <p><img src="service-vs-deployment.png" alt="Service vs Deployment in Kubernetes" /></p>

        <p>Both services and deployments choose which pods they operate on using labels and label selectors. This is where the overlap is.</p>

        <p>You can use deployments independent of services. You can use services independent of deployments. They just go together really nicely!</p>

        <p>This lets you do canary deployments. You add a new deployment version of a pod and run it alongside your existing deployment, but have both deployments handle requests to the service. Once deployed, you can verify the new deployment on a small proportion of the service's traffic, and gradually scale up the new deployment while decreasing the old one.</p>

        <h2>How to delete a deployment in Kubernetes</h2>

        <ol>
        <li>If you‚Äôve created your deployment from a file, you can use <code>kubectl delete -f deployment.yaml</code> to delete your deployment</li>
        <li>If you‚Äôve created your deployment from the command line, you can use <code>kubectl delete deployment my-deployment</code> to delete your deployment</li>
        </ol>


    </div>

    <div class="sidebar-container">
        <a class="sidebar-cover" href="/kubernetes-app-developer/">
            <img class="cover" src="../ckad-guide-new.png" />
            <h2>Learn Kube Faster.<br/>Get the #1 guide.</h2>
        </a>
        
      <p>
          Get my book on Kubernetes for software developers, used by engineers at Google, Microsoft, and IBM.
      </p>
      <a class="sidebar-cta" href="/kubernetes-app-developer/kubernetes-book.html">Get Book</a>
    </div>
    <div class="clear"></div>
</body>
</html>

