<html>
<head>
  <meta charset="utf-8">
  <title>Port, TargetPort, and NodePort - Kubernetes Book</title>
  <link rel="stylesheet" href="../styles.css" media="screen" type="text/css">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-35071535-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-35071535-2');
  </script>
</head>
<body class="sidebar">
    <nav class="article-nav">
        <a href="/kubernetes-app-developer/">üè° Home</a>
        
        <a href="/kubernetes-app-developer/kubernetes-book.html">üìñ Kubernetes Book</a>
        <a href="/kubernetes-app-developer/#purchase">üéì CKAD Certification Course</a>
    </nav>
    <div class="article-container">
        <h1>Port, TargetPort, and NodePort in Kubernetes</h1>
        <p>
            There are several different port declaration fields in Kubernetes. 
            This is a quick overview of each type, and what each means in your Kubernetes YAML.
        </p>

        <h2>Pod <code>port</code> list</h2>
        <p>
            This array, defined in <code>pod.spec.containers[].ports</code>, provides
            a list of ports that get exposed by the container. You don‚Äôt really need
            to specify this list‚Äîeven if it‚Äôs empty, as long as your containers are
            listening on the port, they‚Äôll still be available for network access. 
            This just provides some extra information to Kubernetes.
        </p>

        <h2>Service <code>ports</code> list</h2>
        <p>
            The service‚Äôs <code>service.spec.ports</code> list configures
            which requests to a service port get forwarded to which ports on its pods.
            A successful request can be made from outside the cluster to the node‚Äôs IP address and 
            service‚Äôs <code>nodePort</code>, forwarded to the service‚Äôs <code>port</code>,
            and received on the <code>targetPort</code> by the pod.
        </p>

        <script src="https://gist.github.com/matthewpalmer/9d9180c4980befe6b06babe98577eab9.js"></script>

        <h3><code>nodePort</code></h3>
        <p>
            This setting makes the service visible <em>outside</em> the Kubernetes cluster
            by the node‚Äôs IP address and the port number declared in this property. The
            service also has to be of type NodePort (if this field isn‚Äôt specified,
            Kubernetes will allocate a node port automatically).
        </p>

        <h3><code>port</code></h3>
        <p>
            Expose the <em>service</em> on the specified port internally within the cluster. 
            That is, the service becomes visible on this port, and will send requests made 
            to this port to the pods selected by the service.
        </p>

        <h3><code>targetPort</code></h3>
        <p>
            This is the port on the <em>pod</em> that the request gets sent to. Your application
            needs to be listening for network requests on this port for the service to work.
        </p>
    </div>

    <div class="sidebar-container">
          <a class="sidebar-cover" href="/kubernetes-app-developer/">
              <img class="cover" src="../ckad-guide-new.png" />
              <h2>Learn Kube Faster.<br/>Get the #1 guide.</h2>
          </a>
          
      <p>
          Get my book on Kubernetes for software developers, used by engineers at Google, Microsoft, and IBM.
      </p>
      <a class="sidebar-cta" href="/kubernetes-app-developer/kubernetes-book.html">Get Book</a>
      </div>
    <div class="clear"></div>
</body>
</html>



